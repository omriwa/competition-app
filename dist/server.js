!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(e,t){e.exports=require("express")},function(e,t,r){"use strict";r.r(t);var n=r(0);const o=r.n(n).a.Router();o.use((e,t,r)=>{r()}),o.get("/",(e,t)=>{t.send("competitor")}).get("/register",(e,t)=>{t.send("register")}).get("/login",(e,t)=>{t.send("login")}),t.default=o},function(e,t,r){"use strict";r.r(t);var n=r(0);const o=r.n(n).a.Router();o.use((e,t,r)=>{r()}),o.get("/",(e,t)=>{t.send("trainer")}).get("/register",(e,t)=>{t.send("trainer register")}).get("/login",(e,t)=>{t.send("trainer login")}),t.default=o},function(e,t,r){"use strict";r.r(t),t.default=((e,t,r)=>{t.status(404),t.send("404 Not Found")})},function(e,t,r){"use strict";t.__esModule=!0;var n=r(2),o=r(1);t.default={trainerRouter:n.default,competitorRouter:o.default}},function(e,t){e.exports=require("mongoose")},function(e,t,r){"use strict";t.__esModule=!0;var n=r(3);t.default={pageNotFoundMiddleware:n.default}},function(e,t,r){r(1),r(8),r(2),r(9),r(3),e.exports=r(10)},function(e,t,r){"use strict";r.r(t);var n=r(2),o=r(1);t.default={trainerRouter:n.default,competitorRouter:o.default}},function(e,t,r){"use strict";r.r(t);var n=r(3);t.default={pageNotFoundMiddleware:n.default}},function(e,t,r){"use strict";r.r(t),function(e){var t=r(0),n=r.n(t),o=r(4),u=r.n(o),i=r(5),c=r.n(i),s=(r(12),r(6)),l=r.n(s);console.log("routes",u.a);const a=n()();console.log("start server configuration\n"),a.get("/",(e,t)=>{t.send("bbbbbbbbbb")}),a.use("/competitor",u.a.competitorRouter),a.use("/trainer",u.a.trainerRouter),a.use(l.a.pageNotFoundMiddleware),a.listen(8080,e=>{console.log("start server listening\n"),e?console.log("server listen error:",e):console.log("server is up")}),console.log("connect to db\n");let f="mongodb://"+e.env.IP;c.a.connect(f).then(()=>{console.log("db is connected")}).catch(e=>{console.log("server connect to db errorw:",e)})}.call(this,r(11))},function(e,t){var r,n,o=e.exports={};function u(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===u||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:u}catch(e){r=u}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var s,l=[],a=!1,f=-1;function d(){a&&s&&(a=!1,s.length?l=s.concat(l):f=-1,l.length&&p())}function p(){if(!a){var e=c(d);a=!0;for(var t=l.length;t;){for(s=l,l=[];++f<t;)s&&s[f].run();f=-1,t=l.length}s=null,a=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function b(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new g(e,t)),1!==l.length||a||c(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=b,o.addListener=b,o.once=b,o.off=b,o.removeListener=b,o.removeAllListeners=b,o.emit=b,o.prependListener=b,o.prependOnceListener=b,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){e.exports=require("body-parser")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiZXhwcmVzc1wiIiwid2VicGFjazovLy8uL3NyYy9zZXJ2ZXIvY29udHJvbGxlcnMvY29tcGV0aXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL3RyYWluZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlcnZlci9taWRkbGV3YXJlcy9wYWdlTm90Rm91bmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlcnZlci9jb250cm9sbGVycy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJtb25nb29zZVwiIiwid2VicGFjazovLy8uL3NyYy9zZXJ2ZXIvbWlkZGxld2FyZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlcnZlci9jb250cm9sbGVycy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL21pZGRsZXdhcmVzL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9zZXJ2ZXIvc2VydmVyLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYm9keS1wYXJzZXJcIiJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInJlcXVpcmUiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiZXhwcmVzc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiY29tcGV0aXRvclJvdXRlciIsImEiLCJSb3V0ZXIiLCJ1c2UiLCJyZXEiLCJyZXMiLCJuZXh0Iiwic2VuZCIsInRyYWluZXJSb3V0ZXIiLCJzdGF0dXMiLCJ0cmFpbmVyXzEiLCJjb21wZXRpdG9yXzEiLCJwYWdlTm90Rm91bmRfMSIsInBhZ2VOb3RGb3VuZE1pZGRsZXdhcmUiLCJfdHJhaW5lcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiX2NvbXBldGl0b3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsIl9wYWdlTm90Rm91bmRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsInByb2Nlc3MiLCJleHByZXNzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCIsIl9jb250cm9sbGVyc19pbmRleF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiX2NvbnRyb2xsZXJzX2luZGV4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCIsIm1vbmdvb3NlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18iLCJtb25nb29zZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fX2RlZmF1bHQiLCJfbWlkZGxld2FyZXNfaW5kZXhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyIsIl9taWRkbGV3YXJlc19pbmRleF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fX2RlZmF1bHQiLCJjb25zb2xlIiwibG9nIiwic2VydmVyIiwibGlzdGVuIiwiZSIsImRiVXJsIiwiZW52IiwiSVAiLCJjb25uZWN0IiwidGhlbiIsImNhdGNoIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImRlZmF1bHRTZXRUaW1vdXQiLCJFcnJvciIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwic2V0VGltZW91dCIsInRoaXMiLCJjbGVhclRpbWVvdXQiLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsImRyYWluaW5nIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImxlbmd0aCIsImNvbmNhdCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwibGVuIiwicnVuIiwibWFya2VyIiwicnVuQ2xlYXJUaW1lb3V0IiwiSXRlbSIsImFycmF5Iiwibm9vcCIsIm5leHRUaWNrIiwiYXJncyIsIkFycmF5IiwiYXJndW1lbnRzIiwicHVzaCIsImFwcGx5IiwidGl0bGUiLCJicm93c2VyIiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImxpc3RlbmVycyIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFB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QXBCLEdBQ0EsSUFBQXFCLEVBQUEsSUFBQUMsTUFBQUMsVUFBQWQsT0FBQSxHQUNBLEdBQUFjLFVBQUFkLE9BQUEsRUFDQSxRQUFBdEYsRUFBQSxFQUF1QkEsRUFBQW9HLFVBQUFkLE9BQXNCdEYsSUFDN0NrRyxFQUFBbEcsRUFBQSxHQUFBb0csVUFBQXBHLEdBR0FrRixFQUFBbUIsS0FBQSxJQUFBUCxFQUFBakIsRUFBQXFCLElBQ0EsSUFBQWhCLEVBQUFJLFFBQUFILEdBQ0FQLEVBQUFZLElBU0FNLEVBQUFsRSxVQUFBK0QsSUFBQSxXQUNBWixLQUFBRixJQUFBeUIsTUFBQSxLQUFBdkIsS0FBQWdCLFFBRUEzQyxFQUFBbUQsTUFBQSxVQUNBbkQsRUFBQW9ELFNBQUEsRUFDQXBELEVBQUFjLE9BQ0FkLEVBQUFxRCxRQUNBckQsRUFBQXNELFFBQUEsR0FDQXRELEVBQUF1RCxZQUlBdkQsRUFBQXdELEdBQUFaLEVBQ0E1QyxFQUFBeUQsWUFBQWIsRUFDQTVDLEVBQUEwRCxLQUFBZCxFQUNBNUMsRUFBQTJELElBQUFmLEVBQ0E1QyxFQUFBNEQsZUFBQWhCLEVBQ0E1QyxFQUFBNkQsbUJBQUFqQixFQUNBNUMsRUFBQThELEtBQUFsQixFQUNBNUMsRUFBQStELGdCQUFBbkIsRUFDQTVDLEVBQUFnRSxvQkFBQXBCLEVBRUE1QyxFQUFBaUUsVUFBQSxTQUFBOUcsR0FBcUMsVUFFckM2QyxFQUFBa0UsUUFBQSxTQUFBL0csR0FDQSxVQUFBbUUsTUFBQSxxQ0FHQXRCLEVBQUFtRSxJQUFBLFdBQTJCLFdBQzNCbkUsRUFBQW9FLE1BQUEsU0FBQUMsR0FDQSxVQUFBL0MsTUFBQSxtQ0FFQXRCLEVBQUFzRSxNQUFBLFdBQTRCLHlCQ3ZMNUIzSCxFQUFBRCxRQUFBa0MsUUFBQSIsImZpbGUiOiJzZXJ2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNyk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJleHByZXNzXCIpOyIsImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5jb25zdCBjb21wZXRpdG9yUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuY29tcGV0aXRvclJvdXRlci51c2UoKHJlcSxyZXMsbmV4dCkgPT4ge1xuICAgIG5leHQoKTtcbn0pO1xuXG5jb21wZXRpdG9yUm91dGVyLmdldChcIi9cIiwocmVxLHJlcykgPT4ge1xuICAgIHJlcy5zZW5kKFwiY29tcGV0aXRvclwiKTtcbn0pXG4uZ2V0KFwiL3JlZ2lzdGVyXCIsKHJlcSxyZXMpID0+IHtcbiAgICByZXMuc2VuZChcInJlZ2lzdGVyXCIpO1xufSlcbi5nZXQoXCIvbG9naW5cIiwocmVxLHJlcykgPT4ge1xuICAgIHJlcy5zZW5kKFwibG9naW5cIik7XG59KVxuXG5leHBvcnQgZGVmYXVsdCBjb21wZXRpdG9yUm91dGVyOyIsImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5jb25zdCB0cmFpbmVyUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxudHJhaW5lclJvdXRlci51c2UoKHJlcSxyZXMsbmV4dCkgPT4ge1xuICAgIG5leHQoKTtcbn0pO1xuXG50cmFpbmVyUm91dGVyLmdldChcIi9cIiwocmVxLHJlcykgPT4ge1xuICAgIHJlcy5zZW5kKFwidHJhaW5lclwiKTtcbn0pXG4uZ2V0KFwiL3JlZ2lzdGVyXCIsKHJlcSxyZXMpID0+IHtcbiAgICByZXMuc2VuZChcInRyYWluZXIgcmVnaXN0ZXJcIik7XG59KVxuLmdldChcIi9sb2dpblwiLChyZXEscmVzKSA9PiB7XG4gICAgcmVzLnNlbmQoXCJ0cmFpbmVyIGxvZ2luXCIpO1xufSlcblxuZXhwb3J0IGRlZmF1bHQgdHJhaW5lclJvdXRlcjsiLCJleHBvcnQgZGVmYXVsdCAocmVxLHJlcyxuZXh0KSA9PiB7XG4gICAgcmVzLnN0YXR1cyg0MDQpO1xuICAgIHJlcy5zZW5kKCc0MDQgTm90IEZvdW5kJyk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xudmFyIHRyYWluZXJfMSA9IHJlcXVpcmUoXCIuL3RyYWluZXJcIik7XG52YXIgY29tcGV0aXRvcl8xID0gcmVxdWlyZShcIi4vY29tcGV0aXRvclwiKTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0ge1xuICAgIHRyYWluZXJSb3V0ZXI6IHRyYWluZXJfMVtcImRlZmF1bHRcIl0sXG4gICAgY29tcGV0aXRvclJvdXRlcjogY29tcGV0aXRvcl8xW1wiZGVmYXVsdFwiXVxufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpOyIsIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbnZhciBwYWdlTm90Rm91bmRfMSA9IHJlcXVpcmUoXCIuL3BhZ2VOb3RGb3VuZFwiKTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0ge1xuICAgIHBhZ2VOb3RGb3VuZE1pZGRsZXdhcmU6IHBhZ2VOb3RGb3VuZF8xW1wiZGVmYXVsdFwiXVxufTtcbiIsImltcG9ydCB0cmFpbmVyUm91dGVyIGZyb20gXCIuL3RyYWluZXJcIjtcbmltcG9ydCBjb21wZXRpdG9yUm91dGVyIGZyb20gXCIuL2NvbXBldGl0b3JcIjtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIHRyYWluZXJSb3V0ZXI6ICB0cmFpbmVyUm91dGVyLFxuICAgIGNvbXBldGl0b3JSb3V0ZXI6ICAgY29tcGV0aXRvclJvdXRlclxufVxuIiwiaW1wb3J0IHBhZ2VOb3RGb3VuZE1pZGRsZXdhcmUgZnJvbSBcIi4vcGFnZU5vdEZvdW5kXCI7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBwYWdlTm90Rm91bmRNaWRkbGV3YXJlOiBwYWdlTm90Rm91bmRNaWRkbGV3YXJlXG59IiwiaW1wb3J0IGV4cHJlc3MgZnJvbVwiZXhwcmVzc1wiO1xuaW1wb3J0IFJvdXRlcyBmcm9tIFwiLi9jb250cm9sbGVycy9pbmRleC5qc1wiO1xuaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSBcImJvZHktcGFyc2VyXCI7XG5pbXBvcnQgTWlkZGxld2FyZXMgZnJvbSBcIi4vbWlkZGxld2FyZXMvaW5kZXguanNcIjtcbmNvbnNvbGUubG9nKFwicm91dGVzXCIsUm91dGVzKVxuY29uc3Qgc2VydmVyID0gZXhwcmVzcygpO1xuY29uc3QgZGJPcHRpb25zID0ge1xuICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZVxufTtcblxuLy8gc2VydmVyIGNvbmZpZ3VyYXRpb25cblxuY29uc29sZS5sb2coXCJzdGFydCBzZXJ2ZXIgY29uZmlndXJhdGlvblxcblwiKTtcbi8vIHNlcnZlci51c2UoYm9keVBhcnNlcik7XG5cbi8vTWlkZGxld2FyZXNcblxuXG4vLyBST1VURVNcbnNlcnZlci5nZXQoXCIvXCIsKHJlcSxyZXMpID0+IHtcbiAgICByZXMuc2VuZChcImJiYmJiYmJiYmJcIik7XG59KTtcbnNlcnZlci51c2UoXCIvY29tcGV0aXRvclwiLFJvdXRlcy5jb21wZXRpdG9yUm91dGVyKTtcbnNlcnZlci51c2UoXCIvdHJhaW5lclwiLFJvdXRlcy50cmFpbmVyUm91dGVyKTtcbnNlcnZlci51c2UoTWlkZGxld2FyZXMucGFnZU5vdEZvdW5kTWlkZGxld2FyZSk7XG5cbi8vIExJU1RFTlxuLy8gcHJvY2Vzcy5lbnYuUE9SVFxuc2VydmVyLmxpc3Rlbig4MDgwLChlKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJzdGFydCBzZXJ2ZXIgbGlzdGVuaW5nXFxuXCIpO1xuICAgIChlID8gY29uc29sZS5sb2coXCJzZXJ2ZXIgbGlzdGVuIGVycm9yOlwiLGUpIDogY29uc29sZS5sb2coXCJzZXJ2ZXIgaXMgdXBcIikpO1xufSk7XG4vLyBEQiBDT05ORUNUXG5jb25zb2xlLmxvZyhcImNvbm5lY3QgdG8gZGJcXG5cIik7XG5sZXQgZGJVcmwgPSAnbW9uZ29kYjovLycgKyBwcm9jZXNzLmVudi5JUDtcbm1vbmdvb3NlLmNvbm5lY3QoZGJVcmwpLnRoZW4oKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiZGIgaXMgY29ubmVjdGVkXCIpO1xufSlcbi5jYXRjaCgoZSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwic2VydmVyIGNvbm5lY3QgdG8gZGIgZXJyb3J3OlwiLGUpO1xufSk7XG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYm9keS1wYXJzZXJcIik7Il0sInNvdXJjZVJvb3QiOiIifQ==